<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>MConf: ngarray.h Source File</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <meta name="author" content="Yuriy Turkin">
  <meta name="keywords" content="stellarator, w7x, W7-X, W7-X software">
  <meta name="description" content="W7-X Software">
  <link href="myCss.css" rel="stylesheet" type="text/css">
  <link href="tabs.css" rel="stylesheet" type="text/css" >
</head>
<body>
  <div class="centerAll" id="TopOfPage">
    <div class="bodyForAll">
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_8a58aa3034da50da28943871e9137c86.html">include</a>
  </div>
</div>
<div class="contents">
<h1>ngarray.h</h1><a href="ngarray_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">                          ngarray.h  -  description</span>
<a name="l00003"></a>00003 <span class="comment">                             -------------------</span>
<a name="l00004"></a>00004 <span class="comment">    begin                : Tue May 25 2004</span>
<a name="l00005"></a>00005 <span class="comment">    copyright            : (C) 2004 by Stefan Zegenhagen</span>
<a name="l00006"></a>00006 <span class="comment">    based on             : garray.h (C) 2000 by Andreas Werner (andreas.werner@ipp.mpg.de)</span>
<a name="l00007"></a>00007 <span class="comment">    email                : stefan.zegenhagen@ipp.mpg.de</span>
<a name="l00008"></a>00008 <span class="comment"> ***************************************************************************/</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="comment">/***************************************************************************</span>
<a name="l00011"></a>00011 <span class="comment"> *                                                                         *</span>
<a name="l00012"></a>00012 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
<a name="l00013"></a>00013 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
<a name="l00014"></a>00014 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<a name="l00015"></a>00015 <span class="comment"> *   (at your option) any later version.                                   *</span>
<a name="l00016"></a>00016 <span class="comment"> *                                                                         *</span>
<a name="l00017"></a>00017 <span class="comment"> ***************************************************************************/</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef MC__PBASE_NGARRAY_H__</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define MC__PBASE_NGARRAY_H__</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;limits.h&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#ifdef __INTEL_COMPILER</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="comment">// These pragmas are to quiet icc about "virtual function override intended?"</span>
<a name="l00029"></a>00029 <span class="preprocessor">#pragma warning( push )</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#pragma warning( disable : 1125 )</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 <span class="keyword">namespace </span>MConf {
<a name="l00034"></a>00034 
<a name="l00036"></a><a class="code" href="namespaceMConf_1_1pBase.html">00036</a> <span class="keyword">namespace </span>pBase {
<a name="l00037"></a>00037 
<a name="l00081"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html">00081</a> <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; <span class="keyword">class </span><a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray</a> {
<a name="l00082"></a>00082 <span class="keyword">public</span>:
<a name="l00089"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#4c68b6c34f5cb6c5c879c9750ef79cd4">00089</a>     <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#4c68b6c34f5cb6c5c879c9750ef79cd4" title="Create ngArray.">ngArray</a>() {
<a name="l00090"></a>00090         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = <span class="keyword">new</span> Rep();
<a name="l00091"></a>00091     }
<a name="l00092"></a>00092 
<a name="l00099"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#ed06fe59ff5c818f05bf871cb28bcbd9">00099</a>     <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#4c68b6c34f5cb6c5c879c9750ef79cd4" title="Create ngArray.">ngArray</a>(<span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#ac782da1f912bceb5d8ad00c8dc892ac" title="Returns actual array size.">size</a>, <span class="keyword">const</span> T &amp; val = T())
<a name="l00100"></a>00100     {
<a name="l00101"></a>00101         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = <span class="keyword">new</span> Rep(0, <span class="keywordtype">int</span>(size-1));
<a name="l00102"></a>00102         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#7aead12789ef0d00c7aef9e091e3dddf" title="initialize all elements with a constant value.">fill</a>(val);
<a name="l00103"></a>00103     }
<a name="l00104"></a>00104 
<a name="l00109"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#263dc64c9e5aba83d92f2f255bf19695">00109</a>     <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#4c68b6c34f5cb6c5c879c9750ef79cd4" title="Create ngArray.">ngArray</a>(<span class="keywordtype">int</span> min, <span class="keywordtype">int</span> max, <span class="keyword">const</span> T &amp;val = T())
<a name="l00110"></a>00110     {
<a name="l00111"></a>00111         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = <span class="keyword">new</span> Rep(min, max);
<a name="l00112"></a>00112         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#7aead12789ef0d00c7aef9e091e3dddf" title="initialize all elements with a constant value.">fill</a>(val);
<a name="l00113"></a>00113     }
<a name="l00114"></a>00114 
<a name="l00116"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#ce54898180b00b28b0c30e71ceb465aa">00116</a>     <span class="keyword">virtual</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#ce54898180b00b28b0c30e71ceb465aa" title="Destructor.">~ngArray</a>() {
<a name="l00117"></a>00117         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7c4f9fc5461e804fab5177ac9d731da3">deref</a>();
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 
<a name="l00121"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#2f3da0a67aca392c5950212222af6944">00121</a>     <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#2f3da0a67aca392c5950212222af6944" title="Copy constructor.">ngArray</a>(<span class="keyword">const</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray</a> &amp; that) {
<a name="l00122"></a>00122         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = that.<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>;
<a name="l00123"></a>00123         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#e84429cc5d55e687f3abbd5c0bfe7430">ref</a>();
<a name="l00124"></a>00124     }
<a name="l00125"></a>00125 
<a name="l00127"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#289e952c6f87bf1f0cebe5f5697ea28f">00127</a>     <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray</a> &amp; <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#289e952c6f87bf1f0cebe5f5697ea28f" title="Assignment operator.">operator = </a>(<span class="keyword">const</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray</a> &amp; that) {
<a name="l00128"></a>00128         <span class="keywordflow">if</span> (<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> != that.<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>) {
<a name="l00129"></a>00129             <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7c4f9fc5461e804fab5177ac9d731da3">deref</a>();
<a name="l00130"></a>00130             <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = that.<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>;
<a name="l00131"></a>00131             <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#e84429cc5d55e687f3abbd5c0bfe7430">ref</a>();
<a name="l00132"></a>00132         }
<a name="l00133"></a>00133         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00134"></a>00134     }
<a name="l00135"></a>00135 
<a name="l00146"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#0534e977fc9fee424b3ef94f27a9ed61">00146</a>     T &amp; <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#0534e977fc9fee424b3ef94f27a9ed61" title="Gives access to element i,.">operator[] </a>(<span class="keywordtype">int</span> i)
<a name="l00147"></a>00147     {
<a name="l00148"></a>00148         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c295bade8aee589f6718dfa79edc2a34">detach</a>();
<a name="l00149"></a>00149         <span class="keywordflow">return</span> (*<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>)[i];
<a name="l00150"></a>00150     }
<a name="l00151"></a>00151 
<a name="l00167"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#b74c6b3b6f873daed118125380581204">00167</a>     T &amp; <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#b74c6b3b6f873daed118125380581204" title="Gives direct access to element i, copy on write is not performed.">wd</a>(<span class="keywordtype">int</span> i)
<a name="l00168"></a>00168     {
<a name="l00169"></a>00169         <span class="keywordflow">return</span> (*<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>)[i];
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171 
<a name="l00182"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#f291757a87cb8e12a8fec7647f29c52e">00182</a>     <span class="keyword">const</span> T &amp; <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#0534e977fc9fee424b3ef94f27a9ed61" title="Gives access to element i,.">operator[] </a>(<span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00183"></a>00183 <span class="keyword">    </span>{
<a name="l00184"></a>00184         <span class="keywordflow">return</span> (*<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>)[i];
<a name="l00185"></a>00185     }
<a name="l00186"></a>00186 
<a name="l00194"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c8bb3912a3ce86b15842e79d0b421204">00194</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c8bb3912a3ce86b15842e79d0b421204" title="clear the array">clear</a>()
<a name="l00195"></a>00195     {
<a name="l00196"></a>00196         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7c4f9fc5461e804fab5177ac9d731da3">deref</a>();
<a name="l00197"></a>00197         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = <span class="keyword">new</span> Rep();
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199 
<a name="l00208"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#a7427b588f7916be03419123e295c71d">00208</a>      <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#a7427b588f7916be03419123e295c71d" title="reshape and initialize the array">init</a>(<span class="keywordtype">size_t</span> size, <span class="keyword">const</span> T &amp;val = T())
<a name="l00209"></a>00209      {
<a name="l00210"></a>00210          <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7c4f9fc5461e804fab5177ac9d731da3">deref</a>();
<a name="l00211"></a>00211          <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = <span class="keyword">new</span> Rep(0, <span class="keywordtype">int</span>(size-1));
<a name="l00212"></a>00212          <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#7aead12789ef0d00c7aef9e091e3dddf" title="initialize all elements with a constant value.">fill</a>(val);
<a name="l00213"></a>00213      }
<a name="l00214"></a>00214 
<a name="l00222"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#9b54703920c71eda200d0ec6e1f9f11b">00222</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#a7427b588f7916be03419123e295c71d" title="reshape and initialize the array">init</a>(<span class="keywordtype">int</span> min, <span class="keywordtype">int</span> max, <span class="keyword">const</span> T &amp;val = T())
<a name="l00223"></a>00223     {
<a name="l00224"></a>00224         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7c4f9fc5461e804fab5177ac9d731da3">deref</a>();
<a name="l00225"></a>00225         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>  = <span class="keyword">new</span> Rep(min, max);
<a name="l00226"></a>00226         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#7aead12789ef0d00c7aef9e091e3dddf" title="initialize all elements with a constant value.">fill</a>(val);
<a name="l00227"></a>00227     }
<a name="l00228"></a>00228 
<a name="l00230"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#7aead12789ef0d00c7aef9e091e3dddf">00230</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#7aead12789ef0d00c7aef9e091e3dddf" title="initialize all elements with a constant value.">fill</a>(<span class="keyword">const</span> T &amp;val)
<a name="l00231"></a>00231     {
<a name="l00232"></a>00232         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c295bade8aee589f6718dfa79edc2a34">detach</a>();
<a name="l00233"></a>00233         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a>; i++)
<a name="l00234"></a>00234             <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>[i] = val;
<a name="l00235"></a>00235     }
<a name="l00236"></a>00236 
<a name="l00238"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#ac782da1f912bceb5d8ad00c8dc892ac">00238</a>     <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#ac782da1f912bceb5d8ad00c8dc892ac" title="Returns actual array size.">size</a>()<span class="keyword"> const</span>
<a name="l00239"></a>00239 <span class="keyword">    </span>{
<a name="l00240"></a>00240         <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a>;
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242 
<a name="l00246"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#5d5d2130520065b9fb33018e61a8b13f">00246</a>     <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#5d5d2130520065b9fb33018e61a8b13f" title="return the minimum index. This function returns the minimum valid index to the array...">minIdx</a>()<span class="keyword"> const</span>
<a name="l00247"></a>00247 <span class="keyword">    </span>{
<a name="l00248"></a>00248         <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a>;
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250 
<a name="l00261"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#6b288e58cc312383f4d660238491fa2d">00261</a>     <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#6b288e58cc312383f4d660238491fa2d" title="return the maximum index. This function returns the maximum valid index to the array...">maxIdx</a>()<span class="keyword"> const</span>
<a name="l00262"></a>00262 <span class="keyword">    </span>{
<a name="l00263"></a>00263         <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a>;
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265 
<a name="l00267"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c6e61de369e994009e36f344f99c15ad">00267</a>     <span class="keywordtype">bool</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c6e61de369e994009e36f344f99c15ad" title="return whether the array is empty">empty</a>()<span class="keyword"> const</span>
<a name="l00268"></a>00268 <span class="keyword">    </span>{
<a name="l00269"></a>00269         <span class="keywordflow">return</span> (<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#ac782da1f912bceb5d8ad00c8dc892ac" title="Returns actual array size.">size</a>() == 0);
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271 
<a name="l00278"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334">00278</a>     T *<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334" title="Returns memory pointer.">array</a>()
<a name="l00279"></a>00279     {
<a name="l00280"></a>00280         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c295bade8aee589f6718dfa79edc2a34">detach</a>();
<a name="l00281"></a>00281         <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>;
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283 
<a name="l00291"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409">00291</a>     <span class="keyword">const</span> T * <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>()<span class="keyword"> const</span>
<a name="l00292"></a>00292 <span class="keyword">    </span>{
<a name="l00293"></a>00293         <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>;
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <span class="keyword">protected</span>:
<a name="l00297"></a>00297 
<a name="l00301"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html">00301</a>     <span class="keyword">struct </span><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html" title="Protected class holds data.">Rep</a> {
<a name="l00302"></a>00302 <span class="preprocessor">#ifdef NGARRAY_CHECK_RANGE</span>
<a name="l00303"></a>00303 <span class="preprocessor"></span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> W&gt; <span class="keyword">const</span> W&amp; min (<span class="keyword">const</span> W&amp; x, <span class="keyword">const</span> W&amp; y) { <span class="keywordflow">return</span> (x&lt;y)?x:y; }
<a name="l00304"></a>00304   <span class="keyword">template</span> &lt;<span class="keyword">class</span> W&gt; <span class="keyword">const</span> W&amp; max (<span class="keyword">const</span> W&amp; x, <span class="keyword">const</span> W&amp; y) { <span class="keywordflow">return</span> (x&gt;y)?x:y; }
<a name="l00305"></a>00305 <span class="preprocessor">  #define SET_IN_RANGE(a,mi,ma)   a=max(mi,min(ma,a))</span>
<a name="l00306"></a>00306 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00307"></a><a class="code" href="ngarray_8h.html#e4fd55b18a0e26a5e79bdd8dc2c0dbe5">00307</a> <span class="preprocessor"></span><span class="preprocessor">  #define SET_IN_RANGE(a,mi,ma)</span>
<a name="l00308"></a>00308 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00309"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#1a6a4c4fcce701a69d30ebd0b0341f5e">00309</a> <span class="preprocessor"></span>        <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#1a6a4c4fcce701a69d30ebd0b0341f5e">Rep</a>() {
<a name="l00310"></a>00310             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a> = INT_MAX;
<a name="l00311"></a>00311             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a> = INT_MAX - 1;
<a name="l00312"></a>00312             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a> = 0;
<a name="l00313"></a>00313             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a> = 0;
<a name="l00314"></a>00314             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#383cd1813cb5b1ba63229b183e850017">refcnt</a> = 1;
<a name="l00315"></a>00315         }
<a name="l00316"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#08087bcfff020e688be3ede0170791a7">00316</a>         <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#08087bcfff020e688be3ede0170791a7">Rep</a>(<span class="keywordtype">int</span> min, <span class="keywordtype">int</span> max) {
<a name="l00317"></a>00317             <span class="keywordflow">if</span> (max &lt; min)
<a name="l00318"></a>00318                 max = min;
<a name="l00319"></a>00319             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a> = min;
<a name="l00320"></a>00320             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a> = max;
<a name="l00321"></a>00321             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a> = max - min + 1;
<a name="l00322"></a>00322             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a> = <span class="keyword">new</span> T[<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a>];
<a name="l00323"></a>00323             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#383cd1813cb5b1ba63229b183e850017">refcnt</a> = 1;
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325 
<a name="l00326"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7a2283379580c27a9164183548903742">00326</a>         <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7a2283379580c27a9164183548903742">Rep</a>(<span class="keyword">const</span> <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html" title="Protected class holds data.">Rep</a> &amp;that) {
<a name="l00327"></a>00327             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a> = that.<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a>;
<a name="l00328"></a>00328             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a> = that.<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a>;
<a name="l00329"></a>00329             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a> = that.<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a>;
<a name="l00330"></a>00330             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a> = <span class="keyword">new</span> T[<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a>];
<a name="l00331"></a>00331             <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a>; i++)
<a name="l00332"></a>00332                 <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>[i] = that.<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>[i];
<a name="l00333"></a>00333             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#383cd1813cb5b1ba63229b183e850017">refcnt</a> = 1;
<a name="l00334"></a>00334         }
<a name="l00335"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#ac15d971ce328105f70ffcf0e214c117">00335</a>         <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#ac15d971ce328105f70ffcf0e214c117">~Rep</a>()
<a name="l00336"></a>00336         {
<a name="l00337"></a>00337           <span class="keywordflow">if</span>(<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>) {<span class="keyword">delete</span>[] <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>; <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>=0;}
<a name="l00338"></a>00338         }
<a name="l00339"></a>00339 
<a name="l00340"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#2a322a02b87eab70bf5d7d1f6e1b8842">00340</a>         T&amp; <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#2a322a02b87eab70bf5d7d1f6e1b8842">operator[]</a>(<span class="keywordtype">int</span> idx) {
<a name="l00341"></a>00341             <a class="code" href="ngarray_8h.html#e4fd55b18a0e26a5e79bdd8dc2c0dbe5">SET_IN_RANGE</a>(idx,<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a>,<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a>);
<a name="l00342"></a>00342             <span class="keywordflow">return</span> <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>[idx - <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a>];
<a name="l00343"></a>00343         }
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#21e58a4115e3fe476f7a6677c14c54fa">00345</a>         <span class="keyword">const</span> T&amp; <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#21e58a4115e3fe476f7a6677c14c54fa">operator[]</a>(<span class="keywordtype">int</span> idx)<span class="keyword"> const </span>{
<a name="l00346"></a>00346             <a class="code" href="ngarray_8h.html#e4fd55b18a0e26a5e79bdd8dc2c0dbe5">SET_IN_RANGE</a>(idx,<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a>,<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a>);
<a name="l00347"></a>00347             <span class="keywordflow">return</span> <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>[idx - <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a>];
<a name="l00348"></a>00348         }
<a name="l00349"></a>00349 
<a name="l00350"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#e84429cc5d55e687f3abbd5c0bfe7430">00350</a>         <span class="keywordtype">void</span> <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#e84429cc5d55e687f3abbd5c0bfe7430">ref</a>() {
<a name="l00351"></a>00351             ++<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#383cd1813cb5b1ba63229b183e850017">refcnt</a>;
<a name="l00352"></a>00352         }
<a name="l00353"></a>00353 
<a name="l00354"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7c4f9fc5461e804fab5177ac9d731da3">00354</a>         <span class="keywordtype">void</span> <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#7c4f9fc5461e804fab5177ac9d731da3">deref</a>() {
<a name="l00355"></a>00355           <span class="keywordflow">if</span>(--<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#383cd1813cb5b1ba63229b183e850017">refcnt</a>==0) {
<a name="l00356"></a>00356             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a> = INT_MAX;
<a name="l00357"></a>00357             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a> = INT_MAX-1;
<a name="l00358"></a>00358             <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a> = 0;
<a name="l00359"></a>00359             <span class="keyword">delete</span> <span class="keyword">this</span>;
<a name="l00360"></a>00360           }
<a name="l00361"></a>00361         }
<a name="l00362"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">00362</a>         <span class="keywordtype">int</span> <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#cebad856b94c39702d4f57cdfac2f30a">minIdx</a>;
<a name="l00363"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">00363</a>         <span class="keywordtype">int</span> <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#794b327651c7320c0f2bc77761f5bc70">maxIdx</a>;
<a name="l00364"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">00364</a>         <span class="keywordtype">size_t</span>  <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#3d05cf6aa68b03e254d70afbe869e305">n</a>;
<a name="l00365"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#383cd1813cb5b1ba63229b183e850017">00365</a>         <span class="keywordtype">size_t</span>  <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#383cd1813cb5b1ba63229b183e850017">refcnt</a>;
<a name="l00366"></a><a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">00366</a>         T*  <a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#c88dceffbecaed1137b0e27783adbcc5">data</a>;
<a name="l00367"></a>00367     };
<a name="l00368"></a>00368 
<a name="l00369"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c295bade8aee589f6718dfa79edc2a34">00369</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c295bade8aee589f6718dfa79edc2a34">detach</a>() {
<a name="l00370"></a>00370         <span class="keywordflow">if</span> (<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;<a class="code" href="structMConf_1_1pBase_1_1ngArray_1_1Rep.html#383cd1813cb5b1ba63229b183e850017">refcnt</a> &gt; 1) {
<a name="l00371"></a>00371             Rep *old = <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>;
<a name="l00372"></a>00372             <a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = <span class="keyword">new</span> Rep (*old);
<a name="l00373"></a>00373             old-&gt;deref();
<a name="l00374"></a>00374         }
<a name="l00375"></a>00375     }
<a name="l00376"></a><a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">00376</a>     Rep *<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>;
<a name="l00377"></a>00377 };
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 
<a name="l00405"></a><a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html">00405</a> <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">class </span><a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html" title="a 2 dimensional matrix typeThis class is based on ngArray&amp;lt;T&amp;gt; and represents...">ng2Matrix</a> : <span class="keyword">public</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray</a> &lt; ngArray &lt; T &gt; &gt;
<a name="l00406"></a>00406 {
<a name="l00407"></a>00407     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray &lt; ngArray &lt; T &gt;</a> &gt;::Rep Rep;
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 <span class="keyword">public</span>:
<a name="l00411"></a><a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#05a54ce1d93df9a694e9190c49418892">00411</a>     <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#05a54ce1d93df9a694e9190c49418892" title="constructor. Creates an empty matrix that contains no elements.">ng2Matrix</a>() {}
<a name="l00415"></a><a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#3011bbfd67f173e49769a2d614e54c37">00415</a>     <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#05a54ce1d93df9a694e9190c49418892" title="constructor. Creates an empty matrix that contains no elements.">ng2Matrix</a>(<span class="keywordtype">int</span> min1, <span class="keywordtype">int</span> max1, <span class="keywordtype">int</span> min2, <span class="keywordtype">int</span> max2, <span class="keyword">const</span> T &amp; val = T())
<a name="l00416"></a>00416     {
<a name="l00417"></a>00417         <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#144503d1d0bd361efdd653966ec7c901" title="reshape and initialize the matrix">init</a>(min1, max1, min2, max2, val);
<a name="l00418"></a>00418     }
<a name="l00419"></a>00419 
<a name="l00423"></a><a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#e102528f5169037fc0076557de417abe">00423</a>     <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#05a54ce1d93df9a694e9190c49418892" title="constructor. Creates an empty matrix that contains no elements.">ng2Matrix</a>(<span class="keywordtype">size_t</span> s1, <span class="keywordtype">size_t</span> s2, <span class="keyword">const</span> T &amp;val = T())
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425         <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#144503d1d0bd361efdd653966ec7c901" title="reshape and initialize the matrix">init</a>(s1, s2, val);
<a name="l00426"></a>00426     }
<a name="l00427"></a>00427 
<a name="l00434"></a><a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#34b3e020ef4d15f9b2442bfff37f19b8">00434</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#34b3e020ef4d15f9b2442bfff37f19b8" title="initialize all elements with a constant value.">fill</a>(<span class="keyword">const</span> T &amp;val)
<a name="l00435"></a>00435     {
<a name="l00436"></a>00436         <span class="comment">// unfortunately, all that "this"-ing is necessary for GCC-3.4 because</span>
<a name="l00437"></a>00437         <span class="comment">// that does not find unqualified members in template base classes that</span>
<a name="l00438"></a>00438         <span class="comment">// don't depend on a template parameter argument</span>
<a name="l00439"></a>00439         this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c295bade8aee589f6718dfa79edc2a34">detach</a>();
<a name="l00440"></a>00440         this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;data[0].fill(val);
<a name="l00441"></a>00441         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;n; i++)
<a name="l00442"></a>00442             this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;data[i] = this-&gt;p-&gt;data[0];
<a name="l00443"></a>00443     }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445 
<a name="l00455"></a><a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#144503d1d0bd361efdd653966ec7c901">00455</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#144503d1d0bd361efdd653966ec7c901" title="reshape and initialize the matrix">init</a>(<span class="keywordtype">int</span> min1, <span class="keywordtype">int</span> max1, <span class="keywordtype">int</span> min2, <span class="keywordtype">int</span> max2, <span class="keyword">const</span> T &amp;val = T())
<a name="l00456"></a>00456     {
<a name="l00457"></a>00457         <span class="comment">// unfortunately, all that "this"-ing is necessary for GCC-3.4 because</span>
<a name="l00458"></a>00458         <span class="comment">// that does not find unqualified members in template base classes that</span>
<a name="l00459"></a>00459         <span class="comment">// don't depend on a template parameter argument</span>
<a name="l00460"></a>00460         this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;deref();
<a name="l00461"></a>00461         this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = <span class="keyword">new</span> Rep(min1, max1);
<a name="l00462"></a>00462         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray &lt; T &gt;</a> tmp2(min2, max2, val);
<a name="l00463"></a>00463         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;n; i++)
<a name="l00464"></a>00464             this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;data[i] = tmp2;
<a name="l00465"></a>00465     }
<a name="l00477"></a><a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#390eada2f8328e535c445c89bb98abc0">00477</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#144503d1d0bd361efdd653966ec7c901" title="reshape and initialize the matrix">init</a>(<span class="keywordtype">size_t</span> s1, <span class="keywordtype">size_t</span> s2, <span class="keyword">const</span> T &amp;val = T())
<a name="l00478"></a>00478     {
<a name="l00479"></a>00479         <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html#144503d1d0bd361efdd653966ec7c901" title="reshape and initialize the matrix">init</a>(0, <span class="keywordtype">int</span>(s1-1), 0, <span class="keywordtype">int</span>(s2-1), val);
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481 };
<a name="l00482"></a>00482 
<a name="l00497"></a><a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html">00497</a> <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">class </span><a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html" title="A 3-dimensional matrix typeThis class represents a 3-dimensional matrix type that...">ng3Matrix</a> : <span class="keyword">public</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray</a> &lt; ng2Matrix &lt; T &gt; &gt;
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray &lt; ng2Matrix &lt; T &gt;</a> &gt;::Rep Rep;
<a name="l00500"></a>00500 <span class="keyword">public</span>:
<a name="l00501"></a><a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#b2f1dea52e27985caae94a19806c6e35">00501</a>     <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#b2f1dea52e27985caae94a19806c6e35">ng3Matrix</a>() {}
<a name="l00502"></a><a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#3cf9f808d7ca2b74fe457e1f552f9a3d">00502</a>     <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#b2f1dea52e27985caae94a19806c6e35">ng3Matrix</a>(<span class="keywordtype">int</span> min1, <span class="keywordtype">int</span> max1, <span class="keywordtype">int</span> min2, <span class="keywordtype">int</span> max2, <span class="keywordtype">int</span> min3, <span class="keywordtype">int</span> max3, <span class="keyword">const</span> T &amp; val = T())
<a name="l00503"></a>00503     {
<a name="l00504"></a>00504         <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#1373c9fdce7ee109b6767b38dd4ea49d">init</a>(min1, max1, min2, max2, min3, max3, val);
<a name="l00505"></a>00505     }
<a name="l00506"></a><a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#1f2befc5581491f2f8691ebaa3d9324b">00506</a>     <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#b2f1dea52e27985caae94a19806c6e35">ng3Matrix</a>(<span class="keywordtype">size_t</span> s1, <span class="keywordtype">size_t</span> s2, <span class="keywordtype">size_t</span> s3, <span class="keyword">const</span> T &amp;val = T())
<a name="l00507"></a>00507     {
<a name="l00508"></a>00508         <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#1373c9fdce7ee109b6767b38dd4ea49d">init</a>(s1, s2, s3, val);
<a name="l00509"></a>00509     }
<a name="l00510"></a>00510 
<a name="l00511"></a><a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#34b3e020ef4d15f9b2442bfff37f19b8">00511</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#34b3e020ef4d15f9b2442bfff37f19b8">fill</a>(<span class="keyword">const</span> T &amp; val)
<a name="l00512"></a>00512     {
<a name="l00513"></a>00513         <span class="comment">// unfortunately, all that "this"-ing is necessary for GCC-3.4 because</span>
<a name="l00514"></a>00514         <span class="comment">// that does not find unqualified members in template base classes that</span>
<a name="l00515"></a>00515         <span class="comment">// don't depend on a template parameter argument</span>
<a name="l00516"></a>00516         this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c295bade8aee589f6718dfa79edc2a34">detach</a>();
<a name="l00517"></a>00517         this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;data[0].fill(val);
<a name="l00518"></a>00518         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;n; i++)
<a name="l00519"></a>00519             this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;data[i] = this-&gt;p-&gt;data[0];
<a name="l00520"></a>00520     }
<a name="l00521"></a>00521 
<a name="l00522"></a><a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#1373c9fdce7ee109b6767b38dd4ea49d">00522</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#1373c9fdce7ee109b6767b38dd4ea49d">init</a>(<span class="keywordtype">int</span> min1, <span class="keywordtype">int</span> max1, <span class="keywordtype">int</span> min2, <span class="keywordtype">int</span> max2, <span class="keywordtype">int</span> min3, <span class="keywordtype">int</span> max3, <span class="keyword">const</span> T &amp; val = T())
<a name="l00523"></a>00523     {
<a name="l00524"></a>00524         <span class="comment">// unfortunately, all that "this"-ing is necessary for GCC-3.4 because</span>
<a name="l00525"></a>00525         <span class="comment">// that does not find unqualified members in template base classes that</span>
<a name="l00526"></a>00526         <span class="comment">// don't depend on a template parameter argument</span>
<a name="l00527"></a>00527         this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;deref();
<a name="l00528"></a>00528         this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a> = <span class="keyword">new</span> Rep(min1, max1);
<a name="l00529"></a>00529         <a class="code" href="classMConf_1_1pBase_1_1ng2Matrix.html" title="a 2 dimensional matrix typeThis class is based on ngArray&amp;lt;T&amp;gt; and represents...">ng2Matrix &lt; T &gt;</a> tmp2(min2, max2, min3, max3, val);
<a name="l00530"></a>00530         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;n; i++)
<a name="l00531"></a>00531             this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#e376b3b3be5a1e67c3bdc700315ae10f">p</a>-&gt;data[i] = tmp2;
<a name="l00532"></a>00532     }
<a name="l00533"></a><a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#b83f7c1f88bfa9ba1011a246498262e0">00533</a>     <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#1373c9fdce7ee109b6767b38dd4ea49d">init</a>(<span class="keywordtype">size_t</span> s1, <span class="keywordtype">size_t</span> s2, <span class="keywordtype">size_t</span> s3, <span class="keyword">const</span> T &amp;val = T())
<a name="l00534"></a>00534     {
<a name="l00535"></a>00535         <a class="code" href="classMConf_1_1pBase_1_1ng3Matrix.html#1373c9fdce7ee109b6767b38dd4ea49d">init</a>(0, s1-1, 0, s2-1, 0, s3-1, val);
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537 };
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 <span class="keyword">using</span> std::ostream;
<a name="l00541"></a>00541 <span class="keyword">using</span> std::istream;
<a name="l00542"></a>00542 <span class="keyword">using</span> std::ws;
<a name="l00543"></a>00543 <span class="keyword">using</span> std::string;
<a name="l00544"></a>00544 <span class="preprocessor">#if defined(__MWERKS__)  // Metrowerks CodeWarrior</span>
<a name="l00545"></a>00545 <span class="preprocessor"></span>  <span class="keyword">using</span> std::strtol;
<a name="l00546"></a>00546 <span class="preprocessor">#endif</span>
<a name="l00547"></a>00547 <span class="preprocessor"></span>
<a name="l00548"></a>00548 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00549"></a><a class="code" href="namespaceMConf_1_1pBase.html#3a0d61a1e03e97e9a968e5dd1d2a881d">00549</a> ostream &amp; operator&lt;&lt; (ostream &amp; o, const ngArray&lt;T&gt; &amp; that)
<a name="l00550"></a>00550 {
<a name="l00551"></a>00551     <span class="keywordflow">if</span> (that.empty()) {
<a name="l00552"></a>00552         o &lt;&lt; <span class="stringliteral">"ngArray( ) "</span>;
<a name="l00553"></a>00553         <span class="keywordflow">return</span> o;
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555     o &lt;&lt; <span class="stringliteral">"ngArray("</span> &lt;&lt; that.minIdx() &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; that.maxIdx() &lt;&lt; <span class="stringliteral">")=[ "</span>;
<a name="l00556"></a>00556     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = that.minIdx(); i &lt;= that.maxIdx(); i++) {
<a name="l00557"></a>00557         o &lt;&lt; that[i];
<a name="l00558"></a>00558         <span class="keywordflow">if</span> (i &lt; that.maxIdx()) o &lt;&lt; <span class="stringliteral">" , "</span>;
<a name="l00559"></a>00559     }
<a name="l00560"></a>00560     o &lt;&lt; <span class="stringliteral">" ]"</span>;
<a name="l00561"></a>00561     <span class="keywordflow">return</span> o;
<a name="l00562"></a>00562 }
<a name="l00563"></a>00563 
<a name="l00564"></a>00564 
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 <span class="keyword">template</span>&lt;&gt;
<a name="l00567"></a><a class="code" href="namespaceMConf_1_1pBase.html#62682d42c671fe250316f9189b98a322">00567</a> <span class="keyword">inline</span> ostream &amp; operator&lt;&lt; (ostream &amp; o, const ngArray&lt;string&gt; &amp; that)
<a name="l00568"></a>00568 {
<a name="l00569"></a>00569     <span class="keywordflow">if</span> (that.empty()) {
<a name="l00570"></a>00570         o &lt;&lt; <span class="stringliteral">"ngArray( ) "</span>;
<a name="l00571"></a>00571         <span class="keywordflow">return</span> o;
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573     o &lt;&lt; <span class="stringliteral">"ngArray("</span> &lt;&lt; (that.minIdx()) &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; (that.maxIdx()) &lt;&lt; <span class="stringliteral">")=[ "</span>;
<a name="l00574"></a>00574     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = that.minIdx(); i &lt;= that.maxIdx(); i++) {
<a name="l00575"></a>00575         o &lt;&lt; <span class="charliteral">'"'</span> &lt;&lt; that[i] &lt;&lt; <span class="charliteral">'"'</span>;
<a name="l00576"></a>00576         <span class="keywordflow">if</span> (i &lt; that.maxIdx()) o &lt;&lt; <span class="stringliteral">" , "</span>;
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578     o &lt;&lt; <span class="stringliteral">" ]"</span>;
<a name="l00579"></a>00579     <span class="keywordflow">return</span> o;
<a name="l00580"></a>00580 }
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 
<a name="l00583"></a>00583 
<a name="l00584"></a>00584 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00585"></a><a class="code" href="namespaceMConf_1_1pBase.html#81912d915e7cd74bc290b4ffeb2bfcb2">00585</a> istream &amp; <a class="code" href="namespaceMConf_1_1pBase.html#81912d915e7cd74bc290b4ffeb2bfcb2">operator&gt;&gt; </a>(istream &amp; i, <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray&lt;T&gt;</a> &amp; po)
<a name="l00586"></a>00586 {
<a name="l00587"></a>00587     <span class="comment">/* if the input stream is invalid, return without modifying it */</span>
<a name="l00588"></a>00588     <span class="keywordflow">if</span> (!i)
<a name="l00589"></a>00589         <span class="keywordflow">return</span> i;
<a name="l00590"></a>00590     <span class="keywordtype">char</span> *buf = <span class="keyword">new</span> <span class="keywordtype">char</span>[256];
<a name="l00591"></a>00591     <span class="keywordtype">int</span> min, max;
<a name="l00592"></a>00592     i &gt;&gt; ws;
<a name="l00593"></a>00593     i.read(buf, 8);
<a name="l00594"></a>00594     buf[8] = 0;
<a name="l00595"></a>00595     <span class="comment">/* read the header and check it. If a mismatch is found, set the fail bit</span>
<a name="l00596"></a>00596 <span class="comment">     * of this stream */</span>
<a name="l00597"></a>00597     <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(buf) != <span class="stringliteral">"ngArray("</span>)
<a name="l00598"></a>00598         i.setstate(i.failbit);
<a name="l00599"></a>00599     <span class="keywordflow">if</span> (i) {
<a name="l00600"></a>00600         <span class="comment">/* check whether the array is empty */</span>
<a name="l00601"></a>00601         i &gt;&gt; ws;
<a name="l00602"></a>00602         <span class="keywordtype">char</span> ch = i.get();
<a name="l00603"></a>00603         <span class="keywordflow">if</span> (ch == <span class="charliteral">')'</span>) {
<a name="l00604"></a>00604             <span class="comment">/* the array is empty */</span>
<a name="l00605"></a>00605             po.<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c8bb3912a3ce86b15842e79d0b421204" title="clear the array">clear</a>();
<a name="l00606"></a>00606             <span class="keyword">delete</span>[] buf;
<a name="l00607"></a>00607             <span class="keywordflow">return</span> i;
<a name="l00608"></a>00608         }
<a name="l00609"></a>00609         i.putback(ch);
<a name="l00610"></a>00610         <span class="comment">/* read the first number - it's the minimum index */</span>
<a name="l00611"></a>00611         i.getline(buf, 256, <span class="charliteral">','</span>);
<a name="l00612"></a>00612         <span class="keywordtype">char</span> *tail;
<a name="l00613"></a>00613         min = strtol(buf, &amp;tail, 10);
<a name="l00614"></a>00614         <span class="keywordflow">if</span> (*tail != 0)
<a name="l00615"></a>00615             i.setstate(i.failbit);
<a name="l00616"></a>00616     }
<a name="l00617"></a>00617     <span class="keywordflow">if</span> (i) {
<a name="l00618"></a>00618         <span class="comment">/* read the next number - it is the maximum index and ends with a closing ')' */</span>
<a name="l00619"></a>00619         i.getline(buf, 256, <span class="charliteral">')'</span>);
<a name="l00620"></a>00620         <span class="keywordtype">char</span> *tail;
<a name="l00621"></a>00621         max = strtol(buf, &amp;tail, 10);
<a name="l00622"></a>00622         <span class="keywordflow">if</span> (*tail != 0)
<a name="l00623"></a>00623             i.setstate(i.failbit);
<a name="l00624"></a>00624     }
<a name="l00625"></a>00625     <span class="comment">/* read the next characters: they should be a '=' sign and an opening bracket */</span>
<a name="l00626"></a>00626     <span class="keywordflow">if</span> (i) {
<a name="l00627"></a>00627         i.read(buf, 2);
<a name="l00628"></a>00628         buf[2] = 0;
<a name="l00629"></a>00629         <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(buf) != <span class="stringliteral">"=["</span>)
<a name="l00630"></a>00630             i.setstate(i.failbit);
<a name="l00631"></a>00631     }
<a name="l00632"></a>00632     <span class="keywordflow">if</span> (i) {
<a name="l00633"></a>00633         <span class="comment">/* next come all the elements - we read them into a temporary array</span>
<a name="l00634"></a>00634 <span class="comment">         * if something goes wrong while reading, we don't modify the target array! */</span>
<a name="l00635"></a>00635         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray&lt;T&gt;</a> that(min, max);
<a name="l00636"></a>00636         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = min; idx &lt;= max; idx++) {
<a name="l00637"></a>00637             <span class="comment">/* read the element */</span>
<a name="l00638"></a>00638             i &gt;&gt; that[idx];
<a name="l00639"></a>00639             <span class="comment">/* in case of failure, exit the loop */</span>
<a name="l00640"></a>00640             <span class="keywordflow">if</span> (!i)
<a name="l00641"></a>00641                 <span class="keywordflow">break</span>;
<a name="l00642"></a>00642             i &gt;&gt; ws;
<a name="l00643"></a>00643             <span class="comment">/* get the next character */</span>
<a name="l00644"></a>00644             <span class="keywordtype">char</span> ch = i.get();
<a name="l00645"></a>00645             <span class="comment">/* if it's not the last index, it should be a comma */</span>
<a name="l00646"></a>00646             <span class="keywordflow">if</span> (idx &lt; max) {
<a name="l00647"></a>00647                 <span class="keywordflow">if</span> (ch != <span class="charliteral">','</span>)
<a name="l00648"></a>00648                     i.setstate(i.failbit);
<a name="l00649"></a>00649             } <span class="keywordflow">else</span> {
<a name="l00650"></a>00650                 <span class="comment">/* otherwise, it must be a closing bracket */</span>
<a name="l00651"></a>00651                 <span class="keywordflow">if</span> (ch != <span class="charliteral">']'</span>)
<a name="l00652"></a>00652                     i.setstate(i.failbit);
<a name="l00653"></a>00653             }
<a name="l00654"></a>00654             <span class="comment">/* again, if the stream is not valid anymore, exit the loop */</span>
<a name="l00655"></a>00655             <span class="keywordflow">if</span> (!i)
<a name="l00656"></a>00656                 <span class="keywordflow">break</span>;
<a name="l00657"></a>00657         }
<a name="l00658"></a>00658         <span class="comment">/* done reading the elements - if the stream is valid, we may copy it to</span>
<a name="l00659"></a>00659 <span class="comment">         * the target array. this is usually quite fast (i.e. only a pointer is copied. */</span>
<a name="l00660"></a>00660         <span class="keywordflow">if</span> (i)
<a name="l00661"></a>00661             po = that;
<a name="l00662"></a>00662     }
<a name="l00663"></a>00663     <span class="comment">/* free the temporary buffer and return a reference to the input stream */</span>
<a name="l00664"></a>00664     <span class="keyword">delete</span>[] buf;
<a name="l00665"></a>00665     <span class="keywordflow">return</span> i;
<a name="l00666"></a>00666 }
<a name="l00667"></a>00667 
<a name="l00668"></a>00668 
<a name="l00669"></a>00669 
<a name="l00670"></a>00670 <span class="keyword">template</span>&lt;&gt;
<a name="l00671"></a><a class="code" href="namespaceMConf_1_1pBase.html#065c7b34beaf05b41149743a99e8ef89">00671</a> <span class="keyword">inline</span> istream &amp; <a class="code" href="namespaceMConf_1_1pBase.html#81912d915e7cd74bc290b4ffeb2bfcb2">operator&gt;&gt; </a>(istream &amp; i, <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray&lt;string&gt;</a> &amp; po)
<a name="l00672"></a>00672 {
<a name="l00673"></a>00673     <span class="comment">/* if the input stream is invalid, return without modifying it */</span>
<a name="l00674"></a>00674     <span class="keywordflow">if</span> (!i)
<a name="l00675"></a>00675         <span class="keywordflow">return</span> i;
<a name="l00676"></a>00676     <span class="keywordtype">char</span> *buf = <span class="keyword">new</span> <span class="keywordtype">char</span>[256];
<a name="l00677"></a>00677     <span class="keywordtype">int</span> min, max;
<a name="l00678"></a>00678     i &gt;&gt; ws;
<a name="l00679"></a>00679     i.read(buf, 8);
<a name="l00680"></a>00680     buf[8] = 0;
<a name="l00681"></a>00681     <span class="comment">/* read the header and check it. If a mismatch is found, set the fail bit</span>
<a name="l00682"></a>00682 <span class="comment">     * of this stream */</span>
<a name="l00683"></a>00683     <span class="keywordflow">if</span> (!(<span class="keywordtype">string</span>(buf) == <span class="stringliteral">"ngArray("</span>))
<a name="l00684"></a>00684         i.setstate(i.failbit);
<a name="l00685"></a>00685     <span class="keywordflow">if</span> (i) {
<a name="l00686"></a>00686         i &gt;&gt; ws;
<a name="l00687"></a>00687         <span class="keywordtype">char</span> ch = char(i.get());
<a name="l00688"></a>00688         <span class="keywordflow">if</span> (ch == <span class="charliteral">')'</span>) {
<a name="l00689"></a>00689             <span class="comment">/* the array is empty */</span>
<a name="l00690"></a>00690             po.<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c8bb3912a3ce86b15842e79d0b421204" title="clear the array">clear</a>();
<a name="l00691"></a>00691             <span class="keyword">delete</span>[] buf;
<a name="l00692"></a>00692             <span class="keywordflow">return</span> i;
<a name="l00693"></a>00693         }
<a name="l00694"></a>00694         i.putback(ch);
<a name="l00695"></a>00695         <span class="comment">/* read the first number - it's the minimum index */</span>
<a name="l00696"></a>00696         i.getline(buf, 256, <span class="charliteral">','</span>);
<a name="l00697"></a>00697         <span class="keywordtype">char</span> *tail;
<a name="l00698"></a>00698         min = strtol(buf, &amp;tail, 10);
<a name="l00699"></a>00699         <span class="keywordflow">if</span> (*tail != 0)
<a name="l00700"></a>00700             i.setstate(i.failbit);
<a name="l00701"></a>00701     }
<a name="l00702"></a>00702     <span class="keywordflow">if</span> (i) {
<a name="l00703"></a>00703         <span class="comment">/* read the next number - it is the maximum index and ends with a closing ')' */</span>
<a name="l00704"></a>00704         i.getline(buf, 256, <span class="charliteral">')'</span>);
<a name="l00705"></a>00705         <span class="keywordtype">char</span> *tail;
<a name="l00706"></a>00706         max = strtol(buf, &amp;tail, 10);
<a name="l00707"></a>00707         <span class="keywordflow">if</span> (*tail != 0)
<a name="l00708"></a>00708             i.setstate(i.failbit);
<a name="l00709"></a>00709     }
<a name="l00710"></a>00710     <span class="comment">/* read the next characters: they should be a '=' sign and an opening bracket */</span>
<a name="l00711"></a>00711     <span class="keywordflow">if</span> (i) {
<a name="l00712"></a>00712         i.read(buf, 2);
<a name="l00713"></a>00713         buf[2] = 0;
<a name="l00714"></a>00714         <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(buf) != <span class="stringliteral">"=["</span>)
<a name="l00715"></a>00715             i.setstate(i.failbit);
<a name="l00716"></a>00716     }
<a name="l00717"></a>00717     <span class="keywordflow">if</span> (i) {
<a name="l00718"></a>00718         <span class="comment">/* next come all the elements - we read them into a temporary array</span>
<a name="l00719"></a>00719 <span class="comment">         * if something goes wrong while reading, we don't modify the target array! */</span>
<a name="l00720"></a>00720         <a class="code" href="classMConf_1_1pBase_1_1ngArray.html" title="Array of objects.">ngArray&lt;string&gt;</a> that(min, max);
<a name="l00721"></a>00721         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = min; idx &lt;= max; idx++) {
<a name="l00722"></a>00722             <span class="comment">/* read the element */</span>
<a name="l00723"></a>00723             i &gt;&gt; ws;
<a name="l00724"></a>00724             <span class="keywordflow">if</span> (i.get() == <span class="charliteral">'"'</span>) {
<a name="l00725"></a>00725                 <span class="keywordtype">string</span> temp_str;
<a name="l00726"></a>00726                 std::getline(i, temp_str, <span class="charliteral">'"'</span>);
<a name="l00727"></a>00727                 that[idx] = temp_str;
<a name="l00728"></a>00728             } <span class="keywordflow">else</span>
<a name="l00729"></a>00729                 i.setstate(i.failbit);
<a name="l00730"></a>00730             <span class="comment">/* in case of failure, exit the loop */</span>
<a name="l00731"></a>00731             <span class="keywordflow">if</span> (!i)
<a name="l00732"></a>00732                 <span class="keywordflow">break</span>;
<a name="l00733"></a>00733             i &gt;&gt; ws;
<a name="l00734"></a>00734             <span class="comment">/* get the next character */</span>
<a name="l00735"></a>00735             <span class="keywordtype">char</span> ch = char(i.get());
<a name="l00736"></a>00736             <span class="comment">/* if it's not the last index, it should be a comma */</span>
<a name="l00737"></a>00737             <span class="keywordflow">if</span> (idx &lt; max) {
<a name="l00738"></a>00738                 <span class="keywordflow">if</span> (ch != <span class="charliteral">','</span>)
<a name="l00739"></a>00739                     i.setstate(i.failbit);
<a name="l00740"></a>00740             } <span class="keywordflow">else</span> {
<a name="l00741"></a>00741                 <span class="comment">/* otherwise, it must be a closing bracket */</span>
<a name="l00742"></a>00742                 <span class="keywordflow">if</span> (ch != <span class="charliteral">']'</span>)
<a name="l00743"></a>00743                     i.setstate(i.failbit);
<a name="l00744"></a>00744             }
<a name="l00745"></a>00745             <span class="comment">/* again, if the stream is not valid anymore, exit the loop */</span>
<a name="l00746"></a>00746             <span class="keywordflow">if</span> (!i)
<a name="l00747"></a>00747                 <span class="keywordflow">break</span>;
<a name="l00748"></a>00748         }
<a name="l00749"></a>00749         <span class="comment">/* done reading the elements - if the stream is valid, we may copy it to</span>
<a name="l00750"></a>00750 <span class="comment">         * the target array. this is usually quite fast (i.e. only a pointer is copied. */</span>
<a name="l00751"></a>00751         <span class="keywordflow">if</span> (i)
<a name="l00752"></a>00752             po = that;
<a name="l00753"></a>00753     }
<a name="l00754"></a>00754     <span class="comment">/* free the temporary buffer and return a reference to the input stream */</span>
<a name="l00755"></a>00755     <span class="keyword">delete</span>[] buf;
<a name="l00756"></a>00756     <span class="keywordflow">return</span> i;
<a name="l00757"></a>00757 }
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761 };   <span class="comment">//namespace MConf</span>
<a name="l00762"></a>00762 
<a name="l00763"></a>00763 <span class="preprocessor">#ifdef __INTEL_COMPILER</span>
<a name="l00764"></a>00764 <span class="preprocessor"></span><span class="preprocessor">#pragma warning( pop )</span>
<a name="l00765"></a>00765 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00766"></a>00766 <span class="preprocessor"></span>
<a name="l00767"></a>00767 <span class="preprocessor">#endif // __PBASE_NGARRAY_H__</span>
</pre></div></div>
    <p><a class="anchor" name="BottomOfPage"></a></p>
    <div class="no-print" align="right">
      <table border="0">
        <tr>
        <td>[ <a class="el" href="#TopOfPage">top</a> ]</td>
        <td>[ <a class="el" href="javascript:history.back(-1);"><b>back</b></a> ]</td> 
        </tr>
      </table>
    </div>
    <hr class="separator">
    <div class="ippAddress" align="right">
      <table border="0">
        <tr>
          <td class="ippAddress">13 Oct 2021 &nbsp;&nbsp;&nbsp;&nbsp;</td>
          <td class="ippAddress">
            <a href="http://www.ipp.mpg.de"><img src="IPP.png" alt="www.ipp.mpg.de" border="0"></a>
          </td>
          <td class="ippAddress">
            <!-- Copyright &copy; 2005-2008<br> --> 
            Max-Planck-Institut<br>f&uuml;r Plasmaphysik
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
</body>
</html>
