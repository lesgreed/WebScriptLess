<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>MConf: CArray2d.h Source File</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <meta name="author" content="Yuriy Turkin">
  <meta name="keywords" content="stellarator, w7x, W7-X, W7-X software">
  <meta name="description" content="W7-X Software">
  <link href="myCss.css" rel="stylesheet" type="text/css">
  <link href="tabs.css" rel="stylesheet" type="text/css" >
</head>
<body>
  <div class="centerAll" id="TopOfPage">
    <div class="bodyForAll">
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_8a58aa3034da50da28943871e9137c86.html">include</a>
  </div>
</div>
<div class="contents">
<h1>CArray2d.h</h1><a href="CArray2d_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef MC_CArray2d_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define MC_CArray2d_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="CVector3d_8h.html">CVector3d.h</a>"</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include "<a class="code" href="ngarray_8h.html">ngarray.h</a>"</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="keyword">namespace </span>MConf {
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="comment">//*********************************************************************</span>
<a name="l00028"></a><a class="code" href="classMConf_1_1CArray2d.html">00028</a> <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> TV&gt; <span class="keyword">class </span><a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> : <span class="keyword">public</span> pBase::ngArray &lt;TV&gt; {
<a name="l00029"></a>00029   <span class="keywordtype">int</span> dim1;      
<a name="l00030"></a>00030   <span class="keywordtype">int</span> dim2;      
<a name="l00031"></a>00031   <span class="keywordtype">int</span> low1;      
<a name="l00032"></a>00032   <span class="keywordtype">int</span> low2;      
<a name="l00033"></a>00033 <span class="keyword">public</span>:
<a name="l00035"></a><a class="code" href="classMConf_1_1CArray2d.html#a8cb9848d997495acdd2b21348b9570a">00035</a>   <a class="code" href="classMConf_1_1CArray2d.html#a8cb9848d997495acdd2b21348b9570a" title="Default constructor.">CArray2d</a>() :pBase::<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#4c68b6c34f5cb6c5c879c9750ef79cd4" title="Create ngArray.">ngArray</a> &lt;TV&gt; () {dim1=dim2=low1=low2=0;}
<a name="l00038"></a><a class="code" href="classMConf_1_1CArray2d.html#23d57515fa0b59c4b6884ed57b189935">00038</a>   <a class="code" href="classMConf_1_1CArray2d.html#23d57515fa0b59c4b6884ed57b189935" title="Constructor, creates array with dimentions dim1 and dim2.">CArray2d</a>(<span class="keywordtype">int</span> dim1,<span class="keywordtype">int</span> dim2) {
<a name="l00039"></a>00039     <a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(0, dim1-1,0,dim2-1);
<a name="l00040"></a>00040   }
<a name="l00045"></a><a class="code" href="classMConf_1_1CArray2d.html#524b4de1e85b6cb18437b0c9d9abc364">00045</a>   <a class="code" href="classMConf_1_1CArray2d.html#524b4de1e85b6cb18437b0c9d9abc364" title="Constructor.">CArray2d</a>(<span class="keywordtype">int</span> low1,<span class="keywordtype">int</span> upper1,<span class="keywordtype">int</span> low2,<span class="keywordtype">int</span> upper2) { <span class="comment">// array with 1st index from 'low1' to 'upper1',</span>
<a name="l00046"></a>00046     <a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(low1,upper1,low2,upper2);
<a name="l00047"></a>00047   }
<a name="l00050"></a>00050 <span class="comment">//1  CArray2d(CArray2d const &amp;z){ *this = z; }</span>
<a name="l00052"></a><a class="code" href="classMConf_1_1CArray2d.html#78990418d548a9f25399f370f2d2d482">00052</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classMConf_1_1CArray2d.html#78990418d548a9f25399f370f2d2d482" title="Copy constructor, creates array with the same content and shape as z.">isOK</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> !this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#c6e61de369e994009e36f344f99c15ad" title="return whether the array is empty">empty</a>();}
<a name="l00054"></a><a class="code" href="classMConf_1_1CArray2d.html#4fbeaa4dbe61265068716a1e7a7677dd">00054</a>   <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1CArray2d.html#4fbeaa4dbe61265068716a1e7a7677dd" title="get the the first dimention of the array.">size1</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> dim1;}
<a name="l00056"></a><a class="code" href="classMConf_1_1CArray2d.html#1bb0b9aca66c08dc6853753ca7163146">00056</a>   <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1CArray2d.html#1bb0b9aca66c08dc6853753ca7163146" title="get the the second dimention of the array.">size2</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> dim2;}
<a name="l00058"></a><a class="code" href="classMConf_1_1CArray2d.html#79a490f5b8ec512aeab55b3c3c21b5eb">00058</a>   <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1CArray2d.html#79a490f5b8ec512aeab55b3c3c21b5eb" title="get the first value of the first array index.">lowbound1</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> low1;}
<a name="l00060"></a><a class="code" href="classMConf_1_1CArray2d.html#e368115c2143efbc25a1ef45e33d8c4b">00060</a>   <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1CArray2d.html#e368115c2143efbc25a1ef45e33d8c4b" title="get the first value of the second array index.">lowbound2</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> low2;}
<a name="l00062"></a><a class="code" href="classMConf_1_1CArray2d.html#e9089f437c9a6b8e952dfc4c9fdce96c">00062</a>   <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1CArray2d.html#e9089f437c9a6b8e952dfc4c9fdce96c" title="get the last value of the first array index.">upperbound1</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> low1+dim1-1;}
<a name="l00064"></a><a class="code" href="classMConf_1_1CArray2d.html#d240573ebd74b5f8d048c06d0ce8233e">00064</a>   <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1CArray2d.html#d240573ebd74b5f8d048c06d0ce8233e" title="get the last value of the second array index">upperbound2</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> low2+dim2-1;}
<a name="l00066"></a><a class="code" href="classMConf_1_1CArray2d.html#202534968e31b907261e4fe5317b3c91">00066</a>   <span class="keywordtype">bool</span> <a class="code" href="classMConf_1_1CArray2d.html#202534968e31b907261e4fe5317b3c91" title="check whether indexes within bounds">isIndexOK</a>(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j)<span class="keyword"> const </span>{
<a name="l00067"></a>00067     <span class="keywordflow">return</span> ((i&lt;low1)||(j&lt;low2)||(i&gt;<a class="code" href="classMConf_1_1CArray2d.html#e9089f437c9a6b8e952dfc4c9fdce96c" title="get the last value of the first array index.">upperbound1</a>())||(j&gt;<a class="code" href="classMConf_1_1CArray2d.html#d240573ebd74b5f8d048c06d0ce8233e" title="get the last value of the second array index">upperbound2</a>()))?<span class="keyword">false</span>:<span class="keyword">true</span>;
<a name="l00068"></a>00068   }
<a name="l00069"></a>00069 
<a name="l00073"></a><a class="code" href="classMConf_1_1CArray2d.html#10c096c55ebb133c5231c6124ca75363">00073</a>   TV &amp;<a class="code" href="classMConf_1_1CArray2d.html#10c096c55ebb133c5231c6124ca75363" title="The operator returns the value of array element.">operator()      </a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)       {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334" title="Returns memory pointer.">array</a>()     [(i-low1)*dim2+(j-low2)];}
<a name="l00074"></a><a class="code" href="classMConf_1_1CArray2d.html#18bf65406801db5ea06c46e8f6790058">00074</a>   <span class="keyword">const</span> TV &amp;<a class="code" href="classMConf_1_1CArray2d.html#18bf65406801db5ea06c46e8f6790058">operator()</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)<span class="keyword"> const </span>{<span class="keywordflow">return</span> this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>()[(i-low1)*dim2+(j-low2)];}
<a name="l00075"></a><a class="code" href="classMConf_1_1CArray2d.html#d890273e4c2c43e70f689403b0b36c9b">00075</a>   <span class="keyword">const</span> TV *<a class="code" href="classMConf_1_1CArray2d.html#d890273e4c2c43e70f689403b0b36c9b" title="Returns a constant reference to the element at i.">operator[]</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{<span class="keywordflow">return</span> this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>()+(i-low1)*dim2-low2; }
<a name="l00076"></a>00076 
<a name="l00079"></a><a class="code" href="classMConf_1_1CArray2d.html#6a0763da7d2431795b53a71449e53ffc">00079</a>   <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> &amp;<a class="code" href="classMConf_1_1CArray2d.html#6a0763da7d2431795b53a71449e53ffc" title="Addition assignment Both arrays must have the same shape.">operator += </a>( <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> <span class="keyword">const</span> &amp;v ) 
<a name="l00080"></a>00080   {
<a name="l00081"></a>00081     TV *This =  this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334" title="Returns memory pointer.">array</a>();
<a name="l00082"></a>00082     <span class="keyword">const</span> TV *vcA = v.<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>();
<a name="l00083"></a>00083     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dim1*dim2; i++) {
<a name="l00084"></a>00084       This[i] += vcA[i];
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086     <span class="keywordflow">return</span>( *<span class="keyword">this</span> );
<a name="l00087"></a>00087   }
<a name="l00090"></a><a class="code" href="classMConf_1_1CArray2d.html#6d6c61279cc4984a93425c055d8ea6fb">00090</a>   <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> &amp;<a class="code" href="classMConf_1_1CArray2d.html#6d6c61279cc4984a93425c055d8ea6fb" title="Subtraction assignment Both arrays must have the same shape.">operator -= </a>( <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> <span class="keyword">const</span> &amp;v ) 
<a name="l00091"></a>00091   {
<a name="l00092"></a>00092     TV *This =  this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334" title="Returns memory pointer.">array</a>();
<a name="l00093"></a>00093     <span class="keyword">const</span> TV *vcA = v.<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>();
<a name="l00094"></a>00094     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dim1*dim2; i++) {
<a name="l00095"></a>00095       This[i] -= vcA[i];
<a name="l00096"></a>00096     }
<a name="l00097"></a>00097     <span class="keywordflow">return</span>( *<span class="keyword">this</span> );
<a name="l00098"></a>00098   }
<a name="l00100"></a><a class="code" href="classMConf_1_1CArray2d.html#3918033d76084d854b9ac29325ea079f">00100</a>   <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> &amp;<a class="code" href="classMConf_1_1CArray2d.html#3918033d76084d854b9ac29325ea079f" title="Multiplication assignment.">operator *= </a>( TV d ) 
<a name="l00101"></a>00101   {
<a name="l00102"></a>00102     TV *This =  this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334" title="Returns memory pointer.">array</a>();
<a name="l00103"></a>00103     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dim1*dim2; i++) {
<a name="l00104"></a>00104       This[i] *= d;
<a name="l00105"></a>00105     }
<a name="l00106"></a>00106     <span class="keywordflow">return</span>( *<span class="keyword">this</span> );
<a name="l00107"></a>00107   }
<a name="l00109"></a><a class="code" href="classMConf_1_1CArray2d.html#2f62e66889f844abd5c605655307a075">00109</a>   <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> &amp;<a class="code" href="classMConf_1_1CArray2d.html#2f62e66889f844abd5c605655307a075" title="Division assignment.">operator /= </a>( TV d ) 
<a name="l00110"></a>00110   {
<a name="l00111"></a>00111     TV *This =  this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334" title="Returns memory pointer.">array</a>();
<a name="l00112"></a>00112     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dim1*dim2; i++) {
<a name="l00113"></a>00113       This[i] /= d;
<a name="l00114"></a>00114     }
<a name="l00115"></a>00115     <span class="keywordflow">return</span>( *<span class="keyword">this</span> );
<a name="l00116"></a>00116   }
<a name="l00118"></a><a class="code" href="classMConf_1_1CArray2d.html#b6e119fe9f9af940a00b4b82ad6dea1c">00118</a>   <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> &amp; <a class="code" href="classMConf_1_1CArray2d.html#b6e119fe9f9af940a00b4b82ad6dea1c" title="Product of CArray2d and double.">addweighted</a>(<a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> <span class="keyword">const</span> &amp;v, TV <a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">w</a>) 
<a name="l00119"></a>00119   {
<a name="l00120"></a>00120     TV *This =  this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334" title="Returns memory pointer.">array</a>();
<a name="l00121"></a>00121     <span class="keyword">const</span> TV *vp  =  v.<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>();
<a name="l00122"></a>00122     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dim1*dim2; i++) {
<a name="l00123"></a>00123       This[i] += vp[i]*w;
<a name="l00124"></a>00124     }
<a name="l00125"></a>00125     <span class="keywordflow">return</span>( *<span class="keyword">this</span> );
<a name="l00126"></a>00126   }
<a name="l00127"></a>00127 
<a name="l00128"></a>00128   <span class="comment">// get direct write access to data in order to avoid copy on-write </span>
<a name="l00129"></a><a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">00129</a>   TV &amp;<a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">w</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j) {<span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span>TV &amp;<span class="keyword">&gt;</span>(this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>()[(i-low1)*dim2+(j-low2)]);}
<a name="l00130"></a>00130   
<a name="l00131"></a><a class="code" href="classMConf_1_1CArray2d.html#7f1c3bfc6193952b6dccb6755ad0a05d">00131</a>   <span class="keywordtype">int</span> <a class="code" href="classMConf_1_1CArray2d.html#7f1c3bfc6193952b6dccb6755ad0a05d">index</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (i-low1)*dim2+(j-low2);}
<a name="l00132"></a>00132   <span class="comment">// ptr()+ index(i,j) == &amp;w(i,j);</span>
<a name="l00133"></a><a class="code" href="classMConf_1_1CArray2d.html#10d5e4dd40edf55727d207fe9e745cea">00133</a>   TV *<a class="code" href="classMConf_1_1CArray2d.html#10d5e4dd40edf55727d207fe9e745cea">ptr</a>() {<span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span>TV *<span class="keyword">&gt;</span>(this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>());}
<a name="l00134"></a><a class="code" href="classMConf_1_1CArray2d.html#99ce53f28d7b433c02232594afbaf819">00134</a>   <span class="keyword">const</span> TV *<a class="code" href="classMConf_1_1CArray2d.html#99ce53f28d7b433c02232594afbaf819">cptr</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>();} 
<a name="l00136"></a><a class="code" href="classMConf_1_1CArray2d.html#624a289afc8565fe379c5267c562f381">00136</a>   <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> &amp;<a class="code" href="classMConf_1_1CArray2d.html#624a289afc8565fe379c5267c562f381" title="The operator assigns x to all elements.">operator = </a>(<span class="keyword">const</span> TV &amp; x) {
<a name="l00137"></a>00137     this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#7aead12789ef0d00c7aef9e091e3dddf" title="initialize all elements with a constant value.">fill</a>(x);
<a name="l00138"></a>00138     <span class="keywordflow">return</span>( *<span class="keyword">this</span> );
<a name="l00139"></a>00139   }
<a name="l00140"></a>00140 
<a name="l00142"></a><a class="code" href="classMConf_1_1CArray2d.html#c1718b1ecde8871b06b13807708402a3">00142</a>   <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> &amp; <a class="code" href="classMConf_1_1CArray2d.html#624a289afc8565fe379c5267c562f381" title="The operator assigns x to all elements.">operator = </a>(<span class="keyword">const</span> <a class="code" href="classMConf_1_1CArray2d.html" title="This class provides 2d-array.">CArray2d</a> &amp; z) {
<a name="l00143"></a>00143     <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;z) {
<a name="l00144"></a>00144       this-&gt;dim1 = z.<a class="code" href="classMConf_1_1CArray2d.html#c0eaa52fd9b204be8c83a7d2931a0a5a" title="1st dimention of the array">dim1</a>;
<a name="l00145"></a>00145       this-&gt;dim2 = z.<a class="code" href="classMConf_1_1CArray2d.html#ee2fcb74106dfc485f165fa6944522ee" title="2nd dimention of the array">dim2</a>;
<a name="l00146"></a>00146       this-&gt;low1 = z.<a class="code" href="classMConf_1_1CArray2d.html#63bb918abfea8f921da270f59d90537b" title="low bound of the array">low1</a>;
<a name="l00147"></a>00147       this-&gt;low2 = z.<a class="code" href="classMConf_1_1CArray2d.html#19ad399d815019cee6c00205b93d6e7d" title="low bound of the array">low2</a>;
<a name="l00148"></a>00148       <a class="code" href="classMConf_1_1pBase_1_1ngArray.html">pBase::ngArray &lt;TV&gt;</a>  *<a class="code" href="classMConf_1_1CArray2d.html#10d5e4dd40edf55727d207fe9e745cea">ptr</a> = <span class="keyword">this</span>;
<a name="l00149"></a>00149       ptr-&gt;operator=(z);
<a name="l00150"></a>00150     }
<a name="l00151"></a>00151     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00152"></a>00152   }
<a name="l00159"></a><a class="code" href="classMConf_1_1CArray2d.html#c1397bed89304f34b0f9d7441c63c94a">00159</a>   <span class="keywordtype">bool</span> <a class="code" href="classMConf_1_1CArray2d.html#c1397bed89304f34b0f9d7441c63c94a" title="The method changes the dimentions of the array.">init</a>(<span class="keywordtype">int</span> d1, <span class="keywordtype">int</span> d2) 
<a name="l00160"></a>00160   {
<a name="l00161"></a>00161     <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(d1, d2);
<a name="l00162"></a>00162   }
<a name="l00171"></a><a class="code" href="classMConf_1_1CArray2d.html#c8753b6380bf29e5fbbbcd267c47276f">00171</a>   <span class="keywordtype">bool</span> <a class="code" href="classMConf_1_1CArray2d.html#c8753b6380bf29e5fbbbcd267c47276f" title="The method changes the shape of the array.">init</a>(<span class="keywordtype">int</span> low1,<span class="keywordtype">int</span> upper1,<span class="keywordtype">int</span> low2,<span class="keywordtype">int</span> upper2) { <span class="comment">// 1st index from 'low1' to 'upper1',</span>
<a name="l00172"></a>00172     <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(low1,upper1,low2,upper2);
<a name="l00173"></a>00173   }
<a name="l00181"></a><a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33">00181</a>   <span class="keywordtype">bool</span> <a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(<span class="keywordtype">int</span> low_1,<span class="keywordtype">int</span> upper1,<span class="keywordtype">int</span> low_2,<span class="keywordtype">int</span> upper2) { <span class="comment">// 1st index from 'low_1' to 'upper1',</span>
<a name="l00182"></a>00182     this-&gt;low1=low_1;                                     <span class="comment">// 2nd index from 'low_2' to 'upper2</span>
<a name="l00183"></a>00183     this-&gt;low2=low_2;
<a name="l00184"></a>00184     this-&gt;dim1 = upper1-low1+1;
<a name="l00185"></a>00185     this-&gt;dim2 = upper2-low2+1;
<a name="l00186"></a>00186     <a class="code" href="classMConf_1_1pBase_1_1ngArray.html">pBase::ngArray &lt;TV&gt;</a>  *<a class="code" href="classMConf_1_1CArray2d.html#10d5e4dd40edf55727d207fe9e745cea">ptr</a> = <span class="keyword">this</span>;
<a name="l00187"></a>00187     ptr-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#a7427b588f7916be03419123e295c71d" title="reshape and initialize the array">init</a>(dim1*dim2);
<a name="l00188"></a>00188     <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1CArray2d.html#78990418d548a9f25399f370f2d2d482" title="Copy constructor, creates array with the same content and shape as z.">isOK</a>();
<a name="l00189"></a>00189   }
<a name="l00194"></a><a class="code" href="classMConf_1_1CArray2d.html#651395829067071c4787dd22bb81b9a4">00194</a>   <span class="keywordtype">bool</span> <a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(<span class="keywordtype">int</span> d1,<span class="keywordtype">int</span> d2)
<a name="l00195"></a>00195   {
<a name="l00196"></a>00196     <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(0, d1-1,0,d2-1);
<a name="l00197"></a>00197   }
<a name="l00198"></a>00198 
<a name="l00204"></a><a class="code" href="classMConf_1_1CArray2d.html#c8bb3912a3ce86b15842e79d0b421204">00204</a>   <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1CArray2d.html#c8bb3912a3ce86b15842e79d0b421204" title="The method frees memory This function will clear the array.">clear</a>() {
<a name="l00205"></a>00205     dim1=dim2=low1=low2=0;
<a name="l00206"></a>00206     (<span class="keyword">dynamic_cast&lt;</span><a class="code" href="classMConf_1_1pBase_1_1ngArray.html">pBase::ngArray&lt;TV&gt;</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>))-&gt;clear();
<a name="l00207"></a>00207   }
<a name="l00208"></a>00208 
<a name="l00210"></a><a class="code" href="classMConf_1_1CArray2d.html#3a3ab31c19c38fe926198ddc4a0a4a91">00210</a>   <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1CArray2d.html#3a3ab31c19c38fe926198ddc4a0a4a91" title="The method prints all elements of the array.">print</a>()<span class="keyword"> const </span>{<span class="keywordflow">if</span>(<a class="code" href="classMConf_1_1CArray2d.html#78990418d548a9f25399f370f2d2d482" title="Copy constructor, creates array with the same content and shape as z.">isOK</a>()) {TV <a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">w</a>=1; <a class="code" href="classMConf_1_1CArray2d.html#3a3ab31c19c38fe926198ddc4a0a4a91" title="The method prints all elements of the array.">print</a>(w);} }
<a name="l00222"></a><a class="code" href="classMConf_1_1CArray2d.html#ce0dc5cb11e47c006a0038690ddebcec">00222</a>   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1CArray2d.html#ce0dc5cb11e47c006a0038690ddebcec" title="Write into binary file.">write</a>(T x, FILE *fp)<span class="keyword"> const </span>{
<a name="l00223"></a>00223     <span class="keywordflow">if</span>(!<a class="code" href="classMConf_1_1CArray2d.html#78990418d548a9f25399f370f2d2d482" title="Copy constructor, creates array with the same content and shape as z.">isOK</a>()) <span class="keywordflow">return</span> 0;
<a name="l00224"></a>00224     fwrite(&amp;dim1,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00225"></a>00225     fwrite(&amp;dim2,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00226"></a>00226     fwrite(&amp;low1,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00227"></a>00227     fwrite(&amp;low2,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00228"></a>00228     TV <a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">w</a>=1;
<a name="l00229"></a>00229     <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1CArray2d.html#ce0dc5cb11e47c006a0038690ddebcec" title="Write into binary file.">write</a>(w,x,fp);
<a name="l00230"></a>00230   }
<a name="l00241"></a><a class="code" href="classMConf_1_1CArray2d.html#42ee13bdf97e875f76cd807fd132db6d">00241</a>   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1CArray2d.html#42ee13bdf97e875f76cd807fd132db6d" title="Read from binary file the array that was written by write() method.">read</a>(T x, FILE *fp) {
<a name="l00242"></a>00242     fread(&amp;dim1,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00243"></a>00243     fread(&amp;dim2,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00244"></a>00244     fread(&amp;low1,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00245"></a>00245     fread(&amp;low2,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00246"></a>00246     <span class="keywordtype">int</span> upper1 = dim1+low1-1;
<a name="l00247"></a>00247     <span class="keywordtype">int</span> upper2 = dim2+low2-1;
<a name="l00248"></a>00248     <span class="keywordflow">if</span>(!<a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(low1,upper1,low2,upper2)) <span class="keywordflow">return</span> 0;
<a name="l00249"></a>00249     TV <a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">w</a>=1;
<a name="l00250"></a>00250     <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1CArray2d.html#42ee13bdf97e875f76cd807fd132db6d" title="Read from binary file the array that was written by write() method.">read</a>(w,x,fp);
<a name="l00251"></a>00251   }
<a name="l00254"></a><a class="code" href="classMConf_1_1CArray2d.html#f147bf41d89e9ad0d9e1893ffea4cede">00254</a>   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1CArray2d.html#f147bf41d89e9ad0d9e1893ffea4cede" title="The same as write() but the shape of the array are not saved, only dimensions are...">write0</a>(T x, FILE *fp)<span class="keyword"> const </span>{
<a name="l00255"></a>00255     <span class="keywordflow">if</span>(!<a class="code" href="classMConf_1_1CArray2d.html#78990418d548a9f25399f370f2d2d482" title="Copy constructor, creates array with the same content and shape as z.">isOK</a>()) <span class="keywordflow">return</span> 0;
<a name="l00256"></a>00256     fwrite(&amp;dim1,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00257"></a>00257     fwrite(&amp;dim2,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00258"></a>00258     TV <a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">w</a>=1;
<a name="l00259"></a>00259     <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1CArray2d.html#ce0dc5cb11e47c006a0038690ddebcec" title="Write into binary file.">write</a>(w,x,fp);
<a name="l00260"></a>00260   }
<a name="l00263"></a><a class="code" href="classMConf_1_1CArray2d.html#ffa2cb0b4bb4a7a19f0ee51346e51748">00263</a>   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1CArray2d.html#ffa2cb0b4bb4a7a19f0ee51346e51748" title="The method reads the array that was written by write0() method.">read0</a>(T x, FILE *fp) {
<a name="l00264"></a>00264     fread(&amp;dim1,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00265"></a>00265     fread(&amp;dim2,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>),1,fp);
<a name="l00266"></a>00266     <span class="keywordflow">if</span>(!<a class="code" href="classMConf_1_1CArray2d.html#6b4a3e14614ec687a0e399eb02eccd33" title="The method changes the shape of the array.">resize</a>(dim1,dim2)) <span class="keywordflow">return</span> 0;
<a name="l00267"></a>00267     TV <a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">w</a>=1;
<a name="l00268"></a>00268     <span class="keywordflow">return</span> <a class="code" href="classMConf_1_1CArray2d.html#42ee13bdf97e875f76cd807fd132db6d" title="Read from binary file the array that was written by write() method.">read</a>(w,x,fp);
<a name="l00269"></a>00269   }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="keyword">private</span>:
<a name="l00272"></a>00272   TV &amp;This      (<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)       {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#3e0bf3b69e8c376215d31b1a6b1db334" title="Returns memory pointer.">array</a>()     [i*dim2+j]; }
<a name="l00273"></a>00273   <span class="keyword">const</span> TV &amp;This(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)<span class="keyword"> const </span>{<span class="keywordflow">return</span> this-&gt;<a class="code" href="classMConf_1_1pBase_1_1ngArray.html#79a2aa7c5a543dd9bbd86dfacd407409" title="returns constant pointer to the elements">constArray</a>()[i*dim2+j]; }
<a name="l00274"></a>00274 
<a name="l00276"></a>00276   <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1CArray2d.html#3a3ab31c19c38fe926198ddc4a0a4a91" title="The method prints all elements of the array.">print</a>(<span class="keywordtype">double</span> u)<span class="keyword"> const </span>{ <span class="comment">// TV is float or double</span>
<a name="l00277"></a>00277     <span class="keywordtype">int</span> i,j;
<a name="l00278"></a>00278     <span class="keywordflow">for</span>(i=0; i&lt;dim1; i++) {
<a name="l00279"></a>00279       <span class="keywordflow">for</span>(j=0; j&lt;dim2; j++)
<a name="l00280"></a>00280         printf(<span class="stringliteral">"%g "</span>, This(i,j));
<a name="l00281"></a>00281       printf(<span class="stringliteral">"\n"</span>);
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283   }
<a name="l00284"></a>00284   <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1CArray2d.html#3a3ab31c19c38fe926198ddc4a0a4a91" title="The method prints all elements of the array.">print</a>(<span class="keywordtype">int</span> u)<span class="keyword"> const </span>{ <span class="comment">// TV is int or char</span>
<a name="l00285"></a>00285     <span class="keywordtype">int</span> i,j;
<a name="l00286"></a>00286     <span class="keywordflow">for</span>(i=0; i&lt;dim1; i++) {
<a name="l00287"></a>00287       <span class="keywordflow">for</span>(j=0; j&lt;dim2; j++)  printf(<span class="stringliteral">"%d "</span>, This(i,j));
<a name="l00288"></a>00288       printf(<span class="stringliteral">"\n"</span>);
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290   }
<a name="l00292"></a>00292   <span class="keywordtype">void</span> <a class="code" href="classMConf_1_1CArray2d.html#3a3ab31c19c38fe926198ddc4a0a4a91" title="The method prints all elements of the array.">print</a>(Vector3d &amp;u)<span class="keyword"> const </span>{
<a name="l00293"></a>00293     <span class="keywordtype">int</span> i,j;
<a name="l00294"></a>00294     <span class="keywordflow">for</span>(i=0; i&lt;dim1; i++)
<a name="l00295"></a>00295       <span class="keywordflow">for</span>(j=0; j&lt;dim2; j++)  This(i,j).print();
<a name="l00296"></a>00296   }
<a name="l00298"></a>00298   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1CArray2d.html#ce0dc5cb11e47c006a0038690ddebcec" title="Write into binary file.">write</a>(<span class="keywordtype">double</span> u, T x, FILE *fp)<span class="keyword"> const </span>{<span class="comment">//TV is float,double or char</span>
<a name="l00299"></a>00299     <span class="keywordtype">int</span> i,j;
<a name="l00300"></a>00300     <span class="keywordtype">size_t</span> cnt=0;
<a name="l00301"></a>00301     T <a class="code" href="classMConf_1_1CArray2d.html#3547200272f520fb44b3be4b4a7c9868">w</a>;
<a name="l00302"></a>00302     <span class="keywordtype">size_t</span> wsize = <span class="keyword">sizeof</span>(w);
<a name="l00303"></a>00303     <span class="keywordflow">for</span>(i=0; i&lt;dim1; i++)
<a name="l00304"></a>00304       <span class="keywordflow">for</span>(j=0; j&lt;dim2; j++) {
<a name="l00305"></a>00305         w=T(This(i,j));
<a name="l00306"></a>00306         cnt+=fwrite(&amp;w, wsize,1,fp);
<a name="l00307"></a>00307       }
<a name="l00308"></a>00308     <span class="keywordflow">return</span> cnt;
<a name="l00309"></a>00309   }
<a name="l00311"></a>00311   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1CArray2d.html#ce0dc5cb11e47c006a0038690ddebcec" title="Write into binary file.">write</a>(Vector3d &amp;u, T x, FILE *fp)<span class="keyword"> const </span>{
<a name="l00312"></a>00312     <span class="keywordtype">int</span> i,j;
<a name="l00313"></a>00313     <span class="keywordtype">size_t</span> cnt=0;
<a name="l00314"></a>00314     <span class="keywordflow">for</span>(i=0; i&lt;dim1; i++)
<a name="l00315"></a>00315       <span class="keywordflow">for</span>(j=0; j&lt;dim2; j++) cnt+=This(i,j).write(x,fp);
<a name="l00316"></a>00316     <span class="keywordflow">return</span> cnt;
<a name="l00317"></a>00317   }
<a name="l00319"></a>00319   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1CArray2d.html#42ee13bdf97e875f76cd807fd132db6d" title="Read from binary file the array that was written by write() method.">read</a>(<span class="keywordtype">double</span> u, T x, FILE *fp) {  <span class="comment">// TV is float or double or char</span>
<a name="l00320"></a>00320     <span class="keywordtype">int</span> i,j;
<a name="l00321"></a>00321     <span class="keywordtype">size_t</span> cnt=0;
<a name="l00322"></a>00322     T w;
<a name="l00323"></a>00323     <span class="keywordtype">size_t</span> wsize = <span class="keyword">sizeof</span>(w);
<a name="l00324"></a>00324     <span class="keywordflow">for</span>(i=0; i&lt;dim1; i++)
<a name="l00325"></a>00325       <span class="keywordflow">for</span>(j=0; j&lt;dim2; j++) {
<a name="l00326"></a>00326         cnt+=fread(&amp;w, wsize,1,fp);
<a name="l00327"></a>00327         This(i,j)=w;
<a name="l00328"></a>00328       }
<a name="l00329"></a>00329     <span class="keywordflow">return</span> cnt;
<a name="l00330"></a>00330   }
<a name="l00332"></a>00332   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">size_t</span> <a class="code" href="classMConf_1_1CArray2d.html#42ee13bdf97e875f76cd807fd132db6d" title="Read from binary file the array that was written by write() method.">read</a>(Vector3d &amp;u, T x, FILE *fp) {
<a name="l00333"></a>00333     <span class="keywordtype">int</span> i,j;
<a name="l00334"></a>00334     <span class="keywordtype">size_t</span> cnt=0;
<a name="l00335"></a>00335     <span class="keywordflow">for</span>(i=0; i&lt;dim1; i++)
<a name="l00336"></a>00336       <span class="keywordflow">for</span>(j=0; j&lt;dim2; j++) cnt+=This(i,j).read(x,fp);
<a name="l00337"></a>00337     <span class="keywordflow">return</span> cnt;
<a name="l00338"></a>00338   }
<a name="l00339"></a>00339 
<a name="l00340"></a>00340 };
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 };   <span class="comment">//namespace MConf</span>
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 <span class="preprocessor">#endif</span>
</pre></div></div>
    <p><a class="anchor" name="BottomOfPage"></a></p>
    <div class="no-print" align="right">
      <table border="0">
        <tr>
        <td>[ <a class="el" href="#TopOfPage">top</a> ]</td>
        <td>[ <a class="el" href="javascript:history.back(-1);"><b>back</b></a> ]</td> 
        </tr>
      </table>
    </div>
    <hr class="separator">
    <div class="ippAddress" align="right">
      <table border="0">
        <tr>
          <td class="ippAddress">13 Oct 2021 &nbsp;&nbsp;&nbsp;&nbsp;</td>
          <td class="ippAddress">
            <a href="http://www.ipp.mpg.de"><img src="IPP.png" alt="www.ipp.mpg.de" border="0"></a>
          </td>
          <td class="ippAddress">
            <!-- Copyright &copy; 2005-2008<br> --> 
            Max-Planck-Institut<br>f&uuml;r Plasmaphysik
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
</body>
</html>
